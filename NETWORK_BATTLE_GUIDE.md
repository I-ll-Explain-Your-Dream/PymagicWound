# 魔法伤痕局域网对战指南

## 功能概述

已按照规则实现了完整的局域网对战功能，包括：

### I. 人物设置 ✅
- **普通人**：只可使用物理属性，具有生命值、防御力、攻击力、专属技能
- **魔法师**：分为光、暗、地、火、水、风六种属性
  - 具有：生命值、魔力上限、防御力、攻击力、专属技能、属性

### II. 场地设置 ✅
- 每位玩家选择3位不同角色（2位上场，1位备场）
- 基地：50生命值 + 30魔力
- 角色：满生命值，魔力为上限一半（向上取整）

### III. 对局设置 ✅
- 对局开始时随机获得3张手牌
- 非物理属性牌只能由魔法师打出
- 物理属性牌可由任何人打出
- 属性匹配时伤害×2
- 魔法师：优先消耗自身魔力，不足时消耗基地魔力
- 物理牌：无需消耗魔力

### IV. 伤害计算 ✅
**魔法师伤害计算**：
- 受到魔法伤害：优先扣除魔力，剩余扣除生命值
- 受到物理伤害：直接扣除生命值
- 血量不足：等量扣除基地生命值

**普通人伤害计算**：
- 任何伤害：直接扣除血量
- 血量不足：等量扣除基地生命值

### V. 其他信息 ✅
- **嘲讽状态**：对方只能攻击有嘲讽的角色
- **混乱状态**：角色无法攻击
- **专属技能**：每回合开始时作为卡牌加入手牌
- **魔力恢复**：每回合所有角色恢复5点魔力

## 使用方法

### 1. 准备工作
1. 运行 `main_gui.py`
2. 进入"牌组管理"创建牌组
3. 添加3个角色和至少20张卡牌
4. 保存牌组

### 2. 开始联机
1. 返回主菜单，点击"局域网联机"
2. 一方选择"创建房间"（主机），一方选择"加入房间"（客户端）
3. 输入玩家名称
4. 客户端输入主机IP地址
5. 设置端口号（默认4000）
6. 点击"连接"

### 3. 开始战斗
1. 连接成功后，主机点击"开始战斗"
2. 双方进入战斗界面
3. 主机先手，客户端后手

### 4. 战斗操作
- **选择手牌**：点击手牌区卡牌
- **选择角色**：点击己方角色
- **选择目标**：点击对手角色或基地
- **出牌**：点击"打出卡牌"按钮
- **结束回合**：点击"结束回合"按钮
- **发送表情**：按1/2/3键

### 5. 胜利条件
- 将对手基地生命值降至0即可获胜

## 技巧提示

### 卡牌选择
- 魔法师尽量选择与自己属性相同的卡牌，享受伤害×2加成
- 普通人专注于物理属性卡牌
- 平衡攻击和防御卡牌

### 角色配置
- 前2位选择生存能力强的角色
- 后场选择高输出角色作为替补
- 合理搭配属性以应对不同对手

### 资源管理
- 合理使用角色魔力，避免过度消耗基地魔力
- 保留关键卡牌应对紧急情况
- 计算好费用，确保能出完想出的牌

## 常见问题

### Q: 无法连接怎么办？
A: 检查防火墙设置，确保端口4000未被占用，确认IP地址正确。

### Q: 牌组创建失败？
A: 确保选择了3个不同角色和至少20张卡牌。

### Q: 某些卡牌无法使用？
A: 检查角色类型，非物理属性卡牌只有魔法师能使用。

### Q: 伤害计算不对？
A: 确认属性匹配和角色类型，魔法师用魔力抵消魔法伤害。

## 更新日志

- v1.0: 实现基础局域网对战功能
- v1.1: 完善伤害计算和状态系统
- v1.2: 添加专属技能生成机制
- v1.3: 优化网络同步和UI体验

---

享受游戏！如有问题请查看代码注释或联系开发者。